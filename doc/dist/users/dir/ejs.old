<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ejscript</title>
    <!-- Copyright Embedthis Software. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Ejscript" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'>
    <link href="../../images/favicon.ico" rel="shortcut icon" />
    <link href="../../semantic-ui/semantic.css" rel="stylesheet" type="text/css" />
    <link href="../../css/all.css" rel="stylesheet" type="text/css" />
    

</head>
<body>
        <div class="sidebar">
        <div class="ui large left vertical inverted labeled menu">
            <div class="item">
                <a href="../../index.html" class="logo">Appweb Docs</a>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../../index.html">Home</a>
                    <a class="item" href="../../users/features.html">Appweb Features</a>
                    <a class="item" href="https://embedthis.com/appweb/download.html">Download</a> 
                    <a class="item" href="../../licensing/index.html">Licensing</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../../start/index.html">Getting Started</a>
                    <a class="item" href="../../start/quick.html">Quick Start</a>
                    <a class="item" href="../../start/installing.html">Installing Appweb</a>
                    <a class="item" href="../../start/starting.html">Starting and Stopping</a>
                    <a class="item" href="../../start/service.html">Running as a Service</a>
                    <a class="item" href="../../start/releaseNotes.html">Release Notes</a>
                    <a class="item" href="../../start/source.html">Building from Source</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../../users/index.html">User's Guide</a>
                    <a class="item" href="../../users/configuration.html">Configuring Appweb</a>
                    <a class="item" href="../../users/directives.html">Configuration Directives</a>
                    <a class="item" href="../../users/frameworks.html">Web Frameworks</a>
                    <a class="item" href="../../users/modules.html">Using Loadable Modules</a>
                    <a class="item" href="../../users/ports.html">Ports and Binding</a>
                    <a class="item" href="../../users/routing.html">Routing Requests</a>
                    <a class="item" href="../../users/stages.html">Request Pipeline</a>
                    <a class="item" href="../../users/lang.html">Multi-Language Content</a>
                    <a class="item" href="../../users/authentication.html">User Authentication</a>
                    <a class="item" href="../../users/logFiles.html">Logging</a>
                    <a class="item" href="../../users/caching.html">Caching</a>
                    <a class="item" href="../../users/vhosts.html">Virtual Hosts</a>
                    <a class="item" href="../../users/ssl.html">Secure Sockets (SSL)</a>
                    <a class="item" href="../../users/client.html">Http Client</a>
                    <a class="item" href="../../users/security.html">Security Considerations</a>
                    <a class="item" href="../../users/monitor.html">Monitoring and Defending</a>
                    <a class="item" href="../../users/uploading.html">File Upload</a>
                    <a class="item" href="../../users/webSockets.html">WebSockets</a>
                    <a class="item" href="../../users/man.html">Man Pages</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../../developers/index.html">Developer's Guide</a>
                    <a class="item" href="../../developers/embedding.html">Embedding Appweb</a>
                    <a class="item" href="../../developers/modules.html">Creating Appweb Modules</a>
                    <a class="item" href="../../developers/handlers.html">Creating Appweb Handlers</a>
                    <a class="item" href="../../developers/stages.html">Creating Pipeline Stages</a>
                    <a class="item" href="../../developers/migrating.html">Migrating to Appweb 5</a>
                    <a class="item" href="../../developers/rom.html">Serving Pages from ROM</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../../ref/index.html">Reference Guide</a>
                    <a class="item" href="../../ref/compatibility.html">Compatibility</a>
                    <a class="item" href="../../ref/native.html">Native APIs</a>
                    <a class="item" href="../../ref/architecture.html">Appweb Architecture</a>
                    <a class="item" href="../../ref/memory.html">Appweb Memory Allocation</a>
                    <a class="item" href="../../ref/multithread.html">Multithreaded Programming</a>
                    <a class="item" href="../../standards/http.html">HTTP References</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../../users/samples.html">Samples</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/chroot-server">chroot-server</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/cpp-handler">cpp-handler</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/cpp-module">cpp-module</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/deploy-server">deploy-server</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/esp-hosted">esp-hosted</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/login-basic">login-basic</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/login-form">login-form</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/max-server">max-server</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/min-server">min-server</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/secure-server">secure-server</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-action">simple-action</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-client">simple-client</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-handler">simple-handler</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-module">simple-module</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/simple-server">simple-server</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/spy-filter">spy-filter</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/ssl-server">ssl-server</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/tiny-server">tiny-server</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/typical-client">typical-client</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/typical-server">typical-server</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/websockets-chat">websockets-chat</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/websockets-echo">websockets-echo</a>
                    <a class="item" href="https://github.com/embedthis/appweb/tree/dev/samples/websockets-output">websockets-output</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../../developers/project.html">Project Resources</a>
                    <a class="item" href="http://goo.gl/dGRDl4">Official Appweb News</a>
                    <a class="item" href="https://embedthis.com/appweb/">Appweb Web Site</a>
                    <a class="item" href="https://github.com/embedthis/appweb">Source Code Repository</a>
                    <a class="item" href="https://github.com/embedthis/appweb/issues/389">Appweb Security Alerts</a>
                    <a class="item" href="https://github.com/embedthis/appweb/issues">Project Issue Database</a>
                    <a class="item" href="https://github.com/embedthis/appweb/releases">Change Log</a>
                    <a class="item" href="https://github.com/embedthis/appweb/milestones">Roadmap</a>
                    <a class="item" href="https://embedthis.com/developers/contributors.html">Contributors Agreement</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <span class="header item">Links</span>
                    <a class="item" href="https://embedthis.com/">Embedthis Web Site</a>
                    <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a>
                    <a class="item" href="http://twitter.com/mobstream">Twitter</a>
                </div>
            </div>
        </div>
    </div>





    <div class="ui inverted masthead">
         
        <div class="ui fixed inverted menu">
            <div class="ui sidebar-launch button">
                <i class="icon list layout"></i>
            </div>
            <div class="right menu">
                  
                    <a class="item" href="https://embedthis.com/">Embedthis</a>
                    <a class="item" href="https://embedthis.com/appweb/">Appweb Site</a>
                    <span class="desktop-only">
                        <a class="item" href="http://goo.gl/dGRDl4">Appweb News</a>
                        <a class="item" href="https://github.com/embedthis/appweb">Repository</a>
                        <a class="item" href="https://embedthis.com/blog/">Blog</a>
                        <a class="item" href="https://twitter.com/mobstream">Twitter</a>
                    </span>

            </div>
        </div>
        
        <div class="ui breadcrumb">
            <a class="section" href="../../">Home</a>
            
            <div class="divider">/</div>
            <a class="section" href="../index.html">
                User's Guide
            </a>
            
            <div class="divider">/</div>
            <a class="section" href="../configuration.html">
                Configuration
            </a>
            
            <div class="divider">/</div>
            <a class="section" href="">
                
            </a>
            
            
            <div class="divider">/</div>
            <a class="active section" href="ejs.old">Ejscript</a>
            
        </div>
        
        <div class="version desktop-only">
            v5.4.0
        </div>

    </div>
    <div class="content">

            <h1>Ejscript Directives</h1>
            <p>The Ejscript directives control the Ejscript Web Framework and configure Ejscript web
            applications.</p>
            
            <a id="ejsAlias"></a>
            <h2>EjsAlias</h2>
            <table class="directive" title="directive">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Define an Ejscript web application</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>EjsAlias UriPrefix [Directory] [Script] [Workers]</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default server, Virtual host, Route</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>EjsAlias /myapp/ &nbsp;/var/www/myapp/ start.es 10</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The EjsAlias directive defines an Ejscript application at the given directory which
                            will receive all requests that begin with specified URI prefix. This one-line directive 
                            is typically all you need to do to define an Ejscript application.</p>
                            <p>The UriPrefix argument is mandatory, all others are optional.
                            The Directory argument is used to define the ejs HttpServer home and documents properties that
                            describe the base directory for the ejs application and the static documents directory. 
                            This may be overridden by modifying the home and documents properties of the HttpServer instance.
                            <p>The Script argument specifies the application startup script.
                            If not startup script is specified, the following default script is used by default:</p>
                            <pre>require ejs.web
let server: HttpServer = new HttpServer
var router = new Router(Router.Top)
server.on("readable", function (event, request) {
    server.serve(request, router)
})
server.listen()
</pre>
                            <p>The Workers arguments directive specifies the maximum number of worker threads to use 
                            when serving requests for this ejs application. Worker threads are retained in a pool for 
                            rapid reuse once requests complete. Set to zero for single-threaded operation. Defaults to 
                            any previously defined worker limit via EjsWorkers or the number of Appweb threads set via 
                            Threads (defaults to 10).</p>
                            <p>It is convenient to define applications using this directive in a separate configuration
                            file for each application. If the application config file is stored under the Appweb
                            "conf/apps" directory, then Appweb will read it automatically when it starts. This makes it
                            very easy to install or remove applications by simply adding or removing an application
                            configuration file to or from this directory.</p>
                            <p>The EjsAlias directive does the following actions:</p>
                            <ul>
                                <li>Creates a new Route block for the URL prefix</li>
                                <li>Creates a new directory block if required for the directory</li>
                                <li>Creates an alias for the URL prefix to the directory</li>
                                <li>Defines the <b>ejs</b> handler as the handler for the URL prefix</li>
                            </ul>
                            <p>Note: use a trailing "/" on the prefix to prevent matching URIs that have the prefix
                            as part of the first (non-directory) portion of their URI.</p>.
                        </td>
                    </tr>
                </tbody>
            </table>
            <a id="ejsStartup"></a>
            <h2>EjsStartup</h2>
            <table class="directive" title="directive">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Define the Ejscript startup script</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>EjsScript filename</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default server, Virtual host, Route</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>EjsStartup start.es </td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>The EjsStartup directive specifies the script filename used to start the application.
                            <p>If the script filename is relative, it is found in the ejs application directory specified
                            by EjsAlias (or Alias). Virtual hosts and location blocks will inherit an outer EjsStartup
                            definition. If not startup script is specified, the following default script is used:</p>
                            <pre>require ejs.web
let server: HttpServer = new HttpServer
var router = new Router(Router.Top)
server.on("readable", function (event, request) {
    server.serve(request, router)
})
server.listen()
</pre>
                        </td>
                    </tr>
                </tbody>
            </table>
            <a id="ejsWorkers"></a>
            <h2>EjsWorkers</h2>
            <table class="directive" title="directive">
                <tbody>
                    <tr>
                        <td class="pivot">Description</td>
                        <td>Control if Ejscript automatically creates session objects</td>
                    </tr>
                    <tr>
                        <td class="pivot">Synopsis</td>
                        <td>EjsWorkers number</td>
                    </tr>
                    <tr>
                        <td class="pivot">Context</td>
                        <td>Default server, Virtual host, Route</td>
                    </tr>
                    <tr>
                        <td class="pivot">Example</td>
                        <td>EjsWorkers 10</td>
                    </tr>
                    <tr>
                        <td class="pivot">Notes</td>
                        <td>
                            <p>This directive specifies the maximum number of worker threads to use when serving
                            requests for the ejs handler. Worker threads are retained in a pool for rapid reuse once
                            requests complete. Set to zero for single-threaded operation. Defaults to the number
                            of Appweb threads set via the Threads directive (defaults to 10).</p>
                        </td>
                    </tr>
                </tbody>
            </table>

    </div>
    <div class="terms ui basic center aligned segment">
        <p>&copy; Embedthis Software, 2003-2014. All rights reserved.</p>
    </div>

    <script src="../../jquery/jquery.min.js"></script>
    <script src="../../semantic-ui/semantic.js"></script>
    <script>
        var sl = $('.sidebar-launch');
        $('.sidebar-launch').click(function() {
            var body = $('body');
            if (!body.hasClass('show-sidebar')) {
                body.addClass('show-sidebar');
                $('.sidebar').css('visibility', 'visible');
            } else {
                body.removeClass('show-sidebar');
                $('.sidebar').css('visibility', 'hidden');
            }
        });
        $('.sidebar-launch').trigger('click');
        $('.sidebar a.item').click(function(e) {
            sessionStorage.setItem('scroll-top', $('.sidebar').scrollTop());
        });
        $(function() {
            var url = '../../users/dir/ejs.old';
            var active = $('.sidebar a[href="' + url +'"]');
            active.addClass('active');
            $('.sidebar').scrollTop(sessionStorage.getItem('scroll-top'));
        });
    </script> 

</body>
</html>
